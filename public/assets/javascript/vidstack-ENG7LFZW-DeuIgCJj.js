import{F as a,s as n,e as b,l as c,a as h,G as d,i as u}from"./index-DsPXEYOx.js";function f(e,t=3e3){const s=a();return setTimeout(()=>{const i=e();i&&s.reject(i)},t),s}class p{constructor(t){this.t=n(""),this.referrerPolicy=null,this.bb=t,t.setAttribute("frameBorder","0"),t.setAttribute("allow","autoplay; fullscreen; encrypted-media; picture-in-picture; accelerometer; gyroscope"),this.referrerPolicy!==null&&t.setAttribute("referrerpolicy",this.referrerPolicy)}get iframe(){return this.bb}setup(t){b(this.cb.bind(this)),c(window,"message",this.db.bind(this)),c(this.bb,"load",this.D.bind(this))}cb(){const t=this.t();if(!t.length){this.bb.setAttribute("src","");return}const s=h(()=>this.C());this.bb.setAttribute("src",d(t,s))}w(t,s){var i;(i=this.bb.contentWindow)==null||i.postMessage(JSON.stringify(t),s??"*")}db(t){var o;const s=this.m();if(t.source===((o=this.bb)==null?void 0:o.contentWindow)&&(!u(s)||s===t.origin)){try{const r=JSON.parse(t.data);r&&this.F(r,t);return}catch{}t.data&&this.F(t.data,t)}}}export{p as E,f as t};
